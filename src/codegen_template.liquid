package AutoGenerated
import public CodegenUtils

{% for uid in uids -%} 
constant {{uid.constant}} = compiletime(UNIT_ID_GEN.next()) 
{% endfor %}

@compiletime function generate()
    {% for unit in units -%}
    CodegenUtils.customUnit({{unit.constant}}, "{{unit.model}}", "{{unit.name}}")
    {% endfor %}

    {% for building in buildings -%}
    CodegenUtils.customBuilding({{building.constant}}, "{{building.model}}", "{{building.name}}")
    {% endfor %}

    {% for builder in builders -%}
    CodegenUtils.customBuilder({{builder.constant}}, "{{builder.model}}", "{{builder.name}}", {{builder.built}})
    {% endfor %}

    {% for shop in shops -%}
    CodegenUtils.unitShop({{shop.constant}}, "{{shop.model}}", "{{shop.name}}", {{shop.sold}})
    {% endfor %}

function populateIdRegistries()
    {% for uid in uids -%}
    SaveInteger(REGISTRIES, KEY_UID, compiletime("{{uid.uid}}".getHash()), {{uid.constant}})
    SaveStr(REGISTRIES, KEY_REVERSE_UID, {{uid.constant}}, "{{uid.uid}}")
    {% endfor %}

function populateModelRegistry()
    {% for model in models -%}
    SaveStr(REGISTRIES, KEY_MODEL, {{model.constant}}, "{{model.path}}")
    {% endfor -%}